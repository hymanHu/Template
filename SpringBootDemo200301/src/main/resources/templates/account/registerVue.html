<div>
	<div class="login_wrapper">
		<div class="animate form">
			<section class="login_content">
				<form id="registerForm">
					<h1>注    册</h1>
					<div>
						<input v-model="userName" name="userName" type="text" class="form-control" 
							placeholder="Username" required="" />
					</div>
					<div>
						<input v-model="password" name="password" type="password" class="form-control" 
							placeholder="Password" required="" />
					</div>
					<div>
						<a @click="register()" class="btn btn-default submit" href="javascript:void(0);" 
							id="registerButton">注    册</a>
					</div>

					<div class="clearfix"></div>

					<div class="separator">
						<p class="change_link">
							Already a member ? <a href="/account/login" class="to_register"> 登 录 </a>
						</p>

						<div class="clearfix"></div>
						<br />

						<div>
							<h1>
								<i class="fa fa-paw"></i> *** 管理系统
							</h1>
							<p>©2016 All Rights Reserved. Hyman Hu, This is a Bootstrap 3 template.</p>
						</div>
					</div>
				</form>
			</section>
		</div>
	</div>
</div>
<script type="text/javascript">
	var registerForm = new Vue({
		el: "#registerForm",
		data: {
			userName: "",
			password: "",
		},
		created: function() {
			this.getUser();
		},
		methods: {
			register: function() {
				if(!this.userName.trim()) {
					alert("请输入名字");
					return;
				}
				
				var user = {};
				user.userName = this.userName;
				user.password = this.password;
				$.ajax({
					url : "/api/user",
					type : "post",
					contentType: "application/json",
					data : JSON.stringify(user),
					success : function (data) {
						if (data.status == 200) {
							alert("Register success.");
						} else {
							layer.msg(data.message, {icon: 0});
						}
					},
					error : function (data) {
						layer.msg(data.responseText, {icon: 0});
					}
				});
			},
			getUser: function() {
				var me = this;
				$.ajax({
					url : "/api/user/1",
					type : "get",
					contentType: "application/json",
					success : function (rs) {
						me.userName = rs.userName;
						me.password = rs.password;
					},
					error : function (data) {
						layer.alert(data.responseText, {icon: 0});
					}
				});
			}
		},
	});
</script>